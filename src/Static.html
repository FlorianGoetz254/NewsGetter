<!DOCTYPE html>
<html>
    <head>
        <!-- <link rel="stylesheet" type="text/css" href="theCss.css"> -->
        <style>
            body {
              background-color: linen;
            }
            
            h1 {
              color: maroon;
              margin-left: 40px;
            }
        </style>
    </head>
    <body>
        <h1>NewsGetter</h1>
        <form id="frm1">
            <span style="margin-right: 53px">Type: </span><input type="text" name="type" value="HeadLines"><br>
            <span style="margin-right: 22px">Stichwort: </span> <input type="text" name="q"><br>
            <span style="margin-right: 33px">Sprache: </span> <input type="text" name="language" value="de"><br>
            <span style="margin-right: 21px">Kategorie: </span> <input type="text" name="category"><br>
            <span style="margin-right: 34px">Quellen: </span> <input type="text" name="sources"><br>
            <span style="margin-right: 53px">Seite: </span> <input type="text" name="page" value="1"><br>
            <span style="margin-right: 0px">Seitengrößen: </span> <input type="text" name="pagesize" value="20"><br>
        </form>
        <button onclick="openDyn()" style="margin-left: 93px">Generate Link</button>
        <p>
            <a href="" id="link"></a>
        </p>
        <script>
            function openDyn() {
                var form = document.getElementById("frm1");
                var q = encodeURIComponent(document.getElementsByName("q")[0].value);
                var source = encodeURIComponent(document.getElementsByName("sources")[0].value);
                var category = encodeURIComponent(document.getElementsByName("category")[0].value);

                var link = `localhost:3000/${encodeURIComponent(document.getElementsByName("type")[0].value)}?`+
                `${q != "" ? "&q=" + q : "" }` +
                //`?q=${encodeURIComponent(document.getElementsByName("q")[0].value) || 'undefined'}`+
                `&language=${encodeURIComponent(document.getElementsByName("language")[0].value) || 'undefined'}`+
                `${category != "" ? "&category=" + category : "" }` +
                //`&category=${encodeURIComponent(document.getElementsByName("category")[0].value) || 'undefined'}`+
                `${source != "" ? "&sources=" + source : "" }` +
                //`&sources=${encodeURIComponent(document.getElementsByName("sources")[0].value) || 'undefined'}`+
                `&page=${encodeURIComponent(document.getElementsByName("page")[0].value) || 'undefined'}`+
                `&pagesize=${encodeURIComponent(document.getElementsByName("pagesize")[0].value) || 'undefined'}`;
                console.log(link);
                document.getElementById("link").innerHTML = link;
                document.getElementById("link").setAttribute('href', link);
            }
        </script>
    </body>
</html>